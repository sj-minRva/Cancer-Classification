<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cancer Classification Models - ML Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
    tailwind.config = {
        theme: {
            extend: {
                borderRadius: {
                    lg: "var(--radius)",
                    md: "calc(var(--radius) - 2px)",
                    sm: "calc(var(--radius) - 4px)",
                },
                colors: {
                    background: "var(--background)",
                    foreground: "var(--foreground)",
                    card: {
                        DEFAULT: "var(--card)",
                        foreground: "var(--card-foreground)",
                    },
                    popover: {
                        DEFAULT: "var(--popover)",
                        foreground: "var(--popover-foreground)",
                    },
                    primary: {
                        DEFAULT: "var(--primary)",
                        foreground: "var(--primary-foreground)",
                    },
                    secondary: {
                        DEFAULT: "var(--secondary)",
                        foreground: "var(--secondary-foreground)",
                    },
                    muted: {
                        DEFAULT: "var(--muted)",
                        foreground: "var(--muted-foreground)",
                    },
                    accent: {
                        DEFAULT: "var(--accent)",
                        foreground: "var(--accent-foreground)",
                    },
                    destructive: {
                        DEFAULT: "var(--destructive)",
                        foreground: "var(--destructive-foreground)",
                    },
                    border: "var(--border)",
                    input: "var(--input)",
                    ring: "var(--ring)",
                    chart: {
                        "1": "var(--chart-1)",
                        "2": "var(--chart-2)",
                        "3": "var(--chart-3)",
                        "4": "var(--chart-4)",
                        "5": "var(--chart-5)",
                    }
                },
                fontFamily: {
                    sans: ["var(--font-sans)"],
                }
            },
        }
    };
    </script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --radius: 0.5rem;
            --background: hsl(0 0% 100%);
            --foreground: hsl(222.2 84% 4.9%);
            --card: hsl(0 0% 100%);
            --card-foreground: hsl(222.2 84% 4.9%);
            --popover: hsl(0 0% 100%);
            --popover-foreground: hsl(222.2 84% 4.9%);
            --primary: hsl(221.2 83.2% 53.3%);
            --primary-foreground: hsl(210 40% 98%);
            --secondary: hsl(210 40% 96%);
            --secondary-foreground: hsl(222.2 84% 4.9%);
            --muted: hsl(210 40% 96%);
            --muted-foreground: hsl(215.4 16.3% 46.9%);
            --accent: hsl(210 40% 96%);
            --accent-foreground: hsl(222.2 84% 4.9%);
            --destructive: hsl(0 84.2% 60.2%);
            --destructive-foreground: hsl(210 40% 98%);
            --border: hsl(214.3 31.8% 91.4%);
            --input: hsl(214.3 31.8% 91.4%);
            --ring: hsl(221.2 83.2% 53.3%);
            --chart-1: hsl(12 76% 61%);
            --chart-2: hsl(173 58% 39%);
            --chart-3: hsl(197 37% 24%);
            --chart-4: hsl(43 74% 66%);
            --chart-5: hsl(27 87% 67%);
            --font-sans: 'Inter', ui-sans-serif, system-ui;
        }
        body {
            font-family: var(--font-sans);
        }
        .fade-in {
            animation: fadeIn 0.3s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .slide-in {
            animation: slideIn 0.4s ease-out;
        }
        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-20px); }
            to { opacity: 1; transform: translateX(0); }
        }
    </style>
</head>
<body class="bg-background text-foreground min-h-screen">
    <!-- @COMPONENT: Header -->
    <header class="bg-card border-b border-border shadow-sm">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex items-center space-x-4">
                    <div class="flex items-center space-x-2">
                        <div class="w-8 h-8 bg-primary rounded-lg flex items-center justify-center">
                            <i class="fas fa-microscope text-primary-foreground text-sm"></i>
                        </div>
                        <h1 class="text-xl font-semibold text-foreground">Cancer ML Dashboard</h1>
                    </div>
                    <div class="hidden md:block text-sm text-muted-foreground">
                        Multi-model Cancer Classification System
                    </div>
                </div>
                <div class="flex items-center space-x-4">
                    <div class="bg-secondary px-3 py-1 rounded-full text-xs font-medium text-secondary-foreground">
                        9 Models Loaded
                    </div>
                    <button class="p-2 text-muted-foreground hover:text-foreground transition-colors">
                        <i class="fas fa-cog"></i>
                    </button>
                </div>
            </div>
        </div>
    </header>
    <!-- @END_COMPONENT: Header -->

    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- @COMPONENT: DatasetSelector -->
        <div class="mb-8">
            <div class="bg-card rounded-lg border border-border p-6 shadow-sm">
                <h2 class="text-lg font-semibold mb-4 flex items-center">
                    <i class="fas fa-database text-primary mr-2"></i>
                    Dataset Selection
                </h2>
                <div class="flex flex-wrap gap-4">
                    <div class="flex-1 min-w-[200px]">
                        <label class="block text-sm font-medium text-foreground mb-2">Cancer Type</label>
                        <select class="w-full px-3 py-2 border border-border rounded-md bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:border-transparent">
                            <option value="breast">Breast Cancer</option>
                            <option value="gastric">Gastric Cancer</option>
                            <option value="lung">Lung Cancer</option>
                        </select>
                    </div>
                    <div class="flex items-end">
                        <button class="px-6 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors font-medium flex items-center">
                            <i class="fas fa-sync mr-2"></i>
                            Load Models
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <!-- @END_COMPONENT: DatasetSelector -->

        <div class="grid grid-cols-1 xl:grid-cols-2 gap-8">
            <!-- @COMPONENT: PredictionPanel -->
            <div class="space-y-6">
                <!-- Prediction Input Section -->
                <div class="bg-card rounded-lg border border-border p-6 shadow-sm">
                    <h2 class="text-lg font-semibold mb-4 flex items-center">
                        <i class="fas fa-calculator text-primary mr-2"></i>
                        Single Prediction
                    </h2>
                    
                    <!-- Feature Input Form -->
                    <div class="space-y-4 mb-6">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-foreground mb-1">Feature 1 (Age)</label>
                                <input type="number" placeholder="65" class="w-full px-3 py-2 border border-border rounded-md bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring" data-mock="true">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-foreground mb-1">Feature 2 (Size)</label>
                                <input type="number" placeholder="2.5" step="0.1" class="w-full px-3 py-2 border border-border rounded-md bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring" data-mock="true">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-foreground mb-1">Feature 3 (Grade)</label>
                                <select class="w-full px-3 py-2 border border-border rounded-md bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring">
                                    <option value="1">Grade 1</option>
                                    <option value="2">Grade 2</option>
                                    <option value="3">Grade 3</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-foreground mb-1">Feature 4 (Marker)</label>
                                <input type="number" placeholder="0.8" step="0.01" class="w-full px-3 py-2 border border-border rounded-md bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring" data-mock="true">
                            </div>
                        </div>
                        
                        <div class="flex gap-3">
                            <button class="flex-1 px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors font-medium flex items-center justify-center" data-event="click:handlePredict">
                                <i class="fas fa-brain mr-2"></i>
                                Predict
                            </button>
                            <button class="px-4 py-2 border border-border text-foreground rounded-md hover:bg-muted transition-colors">
                                <i class="fas fa-redo"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Prediction Results -->
                    <div class="border-t border-border pt-4">
                        <h3 class="font-medium mb-3 text-foreground">Model Predictions</h3>
                        <div class="space-y-3">
                            <!-- XGB+SVM Result -->
                            <div class="bg-muted rounded-lg p-4 fade-in">
                                <div class="flex items-center justify-between mb-2">
                                    <span class="font-medium text-foreground">XGB + SVM</span>
                                    <span class="text-sm bg-destructive text-destructive-foreground px-2 py-1 rounded-full">Malignant</span>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <div class="flex-1 bg-background rounded-full h-2">
                                        <div class="bg-destructive h-2 rounded-full" style="width: 85%"></div>
                                    </div>
                                    <span class="text-sm text-muted-foreground">85%</span>
                                </div>
                            </div>

                            <!-- XGB+LR Result -->
                            <div class="bg-muted rounded-lg p-4 fade-in">
                                <div class="flex items-center justify-between mb-2">
                                    <span class="font-medium text-foreground">XGB + Logistic Regression</span>
                                    <span class="text-sm bg-destructive text-destructive-foreground px-2 py-1 rounded-full">Malignant</span>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <div class="flex-1 bg-background rounded-full h-2">
                                        <div class="bg-destructive h-2 rounded-full" style="width: 78%"></div>
                                    </div>
                                    <span class="text-sm text-muted-foreground">78%</span>
                                </div>
                            </div>

                            <!-- XGB+RF Result -->
                            <div class="bg-muted rounded-lg p-4 fade-in">
                                <div class="flex items-center justify-between mb-2">
                                    <span class="font-medium text-foreground">XGB + Random Forest</span>
                                    <span class="text-sm bg-green-100 text-green-800 px-2 py-1 rounded-full">Benign</span>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <div class="flex-1 bg-background rounded-full h-2">
                                        <div class="bg-green-500 h-2 rounded-full" style="width: 42%"></div>
                                    </div>
                                    <span class="text-sm text-muted-foreground">42%</span>
                                </div>
                            </div>
                        </div>

                        <!-- Consensus -->
                        <div class="mt-4 p-3 bg-amber-50 border border-amber-200 rounded-lg">
                            <div class="flex items-center space-x-2">
                                <i class="fas fa-exclamation-triangle text-amber-600"></i>
                                <span class="font-medium text-amber-800">Model Disagreement</span>
                            </div>
                            <p class="text-sm text-amber-700 mt-1">2/3 models predict malignant. Consider additional testing.</p>
                        </div>
                    </div>
                </div>

                <!-- CSV Upload Section -->
                <div class="bg-card rounded-lg border border-border p-6 shadow-sm">
                    <h2 class="text-lg font-semibold mb-4 flex items-center">
                        <i class="fas fa-file-csv text-primary mr-2"></i>
                        Batch Prediction
                    </h2>
                    
                    <div class="border-2 border-dashed border-border rounded-lg p-8 text-center hover:border-primary/50 transition-colors cursor-pointer">
                        <i class="fas fa-cloud-upload-alt text-4xl text-muted-foreground mb-4"></i>
                        <p class="text-foreground font-medium mb-2">Drop CSV file here or click to browse</p>
                        <p class="text-sm text-muted-foreground">Upload a CSV file with patient features for batch prediction</p>
                        <input type="file" accept=".csv" class="hidden" data-implementation="Handle CSV file upload">
                    </div>

                    <div class="mt-4 text-xs text-muted-foreground">
                        <p><strong>Expected format:</strong> feature1, feature2, feature3, feature4</p>
                        <p>Maximum file size: 10MB</p>
                    </div>
                </div>
            </div>
            <!-- @END_COMPONENT: PredictionPanel -->

            <!-- @COMPONENT: ComparisonPanel -->
            <div class="space-y-6">
                <!-- Model Performance Metrics -->
                <div class="bg-card rounded-lg border border-border p-6 shadow-sm">
                    <div class="flex items-center justify-between mb-4">
                        <h2 class="text-lg font-semibold flex items-center">
                            <i class="fas fa-chart-bar text-primary mr-2"></i>
                            Model Performance
                        </h2>
                        <button class="text-sm text-primary hover:text-primary/80 transition-colors flex items-center">
                            <i class="fas fa-download mr-1"></i>
                            Export Report
                        </button>
                    </div>

                    <!-- Dataset Tabs -->
                    <div class="flex space-x-1 mb-6 bg-muted rounded-lg p-1">
                        <button class="flex-1 py-2 px-3 rounded-md bg-background text-foreground font-medium transition-all text-sm">
                            Breast Cancer
                        </button>
                        <button class="flex-1 py-2 px-3 rounded-md text-muted-foreground hover:text-foreground transition-all text-sm">
                            Gastric Cancer
                        </button>
                        <button class="flex-1 py-2 px-3 rounded-md text-muted-foreground hover:text-foreground transition-all text-sm">
                            Lung Cancer
                        </button>
                    </div>

                    <!-- Metrics Table -->
                    <div class="overflow-x-auto mb-6">
                        <table class="w-full text-sm">
                            <thead>
                                <tr class="border-b border-border">
                                    <th class="text-left py-3 text-foreground font-medium">Model</th>
                                    <th class="text-center py-3 text-foreground font-medium">Accuracy</th>
                                    <th class="text-center py-3 text-foreground font-medium">Precision</th>
                                    <th class="text-center py-3 text-foreground font-medium">AUC</th>
                                    <th class="text-center py-3 text-foreground font-medium">Kappa</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="border-b border-border/50">
                                    <td class="py-3 font-medium text-foreground">XGB + SVM</td>
                                    <td class="text-center py-3">
                                        <span class="inline-flex items-center px-2 py-1 rounded-full text-xs bg-green-100 text-green-800">
                                            94.2%
                                        </span>
                                    </td>
                                    <td class="text-center py-3 text-muted-foreground">91.8%</td>
                                    <td class="text-center py-3 text-muted-foreground">0.956</td>
                                    <td class="text-center py-3 text-muted-foreground">0.881</td>
                                </tr>
                                <tr class="border-b border-border/50">
                                    <td class="py-3 font-medium text-foreground">XGB + LR</td>
                                    <td class="text-center py-3">
                                        <span class="inline-flex items-center px-2 py-1 rounded-full text-xs bg-blue-100 text-blue-800">
                                            92.7%
                                        </span>
                                    </td>
                                    <td class="text-center py-3 text-muted-foreground">89.3%</td>
                                    <td class="text-center py-3 text-muted-foreground">0.943</td>
                                    <td class="text-center py-3 text-muted-foreground">0.847</td>
                                </tr>
                                <tr>
                                    <td class="py-3 font-medium text-foreground">XGB + RF</td>
                                    <td class="text-center py-3">
                                        <span class="inline-flex items-center px-2 py-1 rounded-full text-xs bg-purple-100 text-purple-800">
                                            93.5%
                                        </span>
                                    </td>
                                    <td class="text-center py-3 text-muted-foreground">90.6%</td>
                                    <td class="text-center py-3 text-muted-foreground">0.951</td>
                                    <td class="text-center py-3 text-muted-foreground">0.864</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- Performance Chart -->
                    <div class="h-64 bg-muted rounded-lg flex items-center justify-center">
                        <canvas id="performanceChart" width="400" height="250"></canvas>
                    </div>
                </div>

                <!-- ROC Curves -->
                <div class="bg-card rounded-lg border border-border p-6 shadow-sm">
                    <h3 class="text-lg font-semibold mb-4 flex items-center">
                        <i class="fas fa-chart-line text-primary mr-2"></i>
                        ROC Curves
                    </h3>
                    
                    <div class="h-64 bg-muted rounded-lg flex items-center justify-center">
                        <canvas id="rocChart" width="400" height="250"></canvas>
                    </div>
                    
                    <div class="flex justify-center mt-4 space-x-6 text-sm">
                        <div class="flex items-center space-x-2">
                            <div class="w-3 h-3 bg-blue-500 rounded-full"></div>
                            <span class="text-muted-foreground">XGB + SVM (AUC: 0.956)</span>
                        </div>
                        <div class="flex items-center space-x-2">
                            <div class="w-3 h-3 bg-green-500 rounded-full"></div>
                            <span class="text-muted-foreground">XGB + LR (AUC: 0.943)</span>
                        </div>
                        <div class="flex items-center space-x-2">
                            <div class="w-3 h-3 bg-purple-500 rounded-full"></div>
                            <span class="text-muted-foreground">XGB + RF (AUC: 0.951)</span>
                        </div>
                    </div>
                </div>

                <!-- Model Status -->
                <div class="bg-card rounded-lg border border-border p-6 shadow-sm">
                    <h3 class="text-lg font-semibold mb-4 flex items-center">
                        <i class="fas fa-server text-primary mr-2"></i>
                        Model Status
                    </h3>
                    
                    <div class="space-y-3">
                        <!-- @MAP: datasets.map(dataset => ( -->
                        <div class="flex items-center justify-between p-3 bg-muted rounded-lg">
                            <div class="flex items-center space-x-3">
                                <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                                <span class="font-medium text-foreground" data-bind="dataset.name">Breast Cancer Models</span>
                            </div>
                            <div class="flex space-x-2">
                                <span class="text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full">3/3 Active</span>
                                <span class="text-xs text-muted-foreground">Last updated: 2h ago</span>
                            </div>
                        </div>
                        <!-- @END_MAP )) -->
                        
                        <div class="flex items-center justify-between p-3 bg-muted rounded-lg">
                            <div class="flex items-center space-x-3">
                                <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                                <span class="font-medium text-foreground">Gastric Cancer Models</span>
                            </div>
                            <div class="flex space-x-2">
                                <span class="text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full">3/3 Active</span>
                                <span class="text-xs text-muted-foreground">Last updated: 1h ago</span>
                            </div>
                        </div>
                        
                        <div class="flex items-center justify-between p-3 bg-muted rounded-lg">
                            <div class="flex items-center space-x-3">
                                <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                                <span class="font-medium text-foreground">Lung Cancer Models</span>
                            </div>
                            <div class="flex space-x-2">
                                <span class="text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full">3/3 Active</span>
                                <span class="text-xs text-muted-foreground">Last updated: 30m ago</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- @END_COMPONENT: ComparisonPanel -->
        </div>
    </div>

    <script>
        // TODO: Implement actual API calls to FastAPI backend
        // TODO: Implement React component state management
        // TODO: Implement form validation and error handling
        
        (function() {
            // Initialize charts when page loads
            function initializeCharts() {
                // Performance Chart
                const performanceCtx = document.getElementById('performanceChart');
                if (performanceCtx) {
                    new Chart(performanceCtx, {
                        type: 'bar',
                        data: {
                            labels: ['Accuracy', 'Precision', 'AUC', 'Kappa'],
                            datasets: [
                                {
                                    label: 'XGB + SVM',
                                    data: [94.2, 91.8, 95.6, 88.1],
                                    backgroundColor: 'rgba(59, 130, 246, 0.8)',
                                    borderColor: 'rgb(59, 130, 246)',
                                    borderWidth: 1
                                },
                                {
                                    label: 'XGB + LR',
                                    data: [92.7, 89.3, 94.3, 84.7],
                                    backgroundColor: 'rgba(16, 185, 129, 0.8)',
                                    borderColor: 'rgb(16, 185, 129)',
                                    borderWidth: 1
                                },
                                {
                                    label: 'XGB + RF',
                                    data: [93.5, 90.6, 95.1, 86.4],
                                    backgroundColor: 'rgba(139, 92, 246, 0.8)',
                                    borderColor: 'rgb(139, 92, 246)',
                                    borderWidth: 1
                                }
                            ]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                legend: {
                                    position: 'top',
                                }
                            },
                            scales: {
                                y: {
                                    beginAtZero: true,
                                    max: 100
                                }
                            }
                        }
                    });
                }

                // ROC Chart
                const rocCtx = document.getElementById('rocChart');
                if (rocCtx) {
                    new Chart(rocCtx, {
                        type: 'line',
                        data: {
                            labels: Array.from({length: 11}, (_, i) => (i * 0.1).toFixed(1)),
                            datasets: [
                                {
                                    label: 'XGB + SVM',
                                    data: [0, 0.1, 0.25, 0.4, 0.6, 0.75, 0.85, 0.92, 0.96, 0.99, 1.0],
                                    borderColor: 'rgb(59, 130, 246)',
                                    backgroundColor: 'rgba(59, 130, 246, 0.1)',
                                    tension: 0.4,
                                    fill: false
                                },
                                {
                                    label: 'XGB + LR',
                                    data: [0, 0.08, 0.22, 0.38, 0.58, 0.72, 0.82, 0.89, 0.94, 0.98, 1.0],
                                    borderColor: 'rgb(16, 185, 129)',
                                    backgroundColor: 'rgba(16, 185, 129, 0.1)',
                                    tension: 0.4,
                                    fill: false
                                },
                                {
                                    label: 'XGB + RF',
                                    data: [0, 0.09, 0.23, 0.39, 0.59, 0.73, 0.83, 0.90, 0.95, 0.98, 1.0],
                                    borderColor: 'rgb(139, 92, 246)',
                                    backgroundColor: 'rgba(139, 92, 246, 0.1)',
                                    tension: 0.4,
                                    fill: false
                                }
                            ]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                legend: {
                                    display: false
                                }
                            },
                            scales: {
                                x: {
                                    title: {
                                        display: true,
                                        text: 'False Positive Rate'
                                    }
                                },
                                y: {
                                    title: {
                                        display: true,
                                        text: 'True Positive Rate'
                                    },
                                    min: 0,
                                    max: 1
                                }
                            }
                        }
                    });
                }
            }

            // Dataset tab switching
            function setupTabSwitching() {
                const tabs = document.querySelectorAll('.bg-muted button');
                tabs.forEach(tab => {
                    tab.addEventListener('click', function() {
                        // Remove active state from all tabs
                        tabs.forEach(t => {
                            t.classList.remove('bg-background', 'text-foreground');
                            t.classList.add('text-muted-foreground');
                        });
                        
                        // Add active state to clicked tab
                        this.classList.add('bg-background', 'text-foreground');
                        this.classList.remove('text-muted-foreground');
                        
                        // TODO: Update metrics table and charts based on selected dataset
                    });
                });
            }

            // Initialize when DOM is loaded
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', function() {
                    initializeCharts();
                    setupTabSwitching();
                });
            } else {
                initializeCharts();
                setupTabSwitching();
            }
        })();
    </script>
</body>
</html>